<h1>Discussion for {{book.title}}</h1>
<div id="discussion">
    {{#each comments}}
        <p><strong>{{this.username}}:</strong> {{this.text}}</p>
    {{/each}}
</div>
<form id="comment-form">
    <input type="text" id="comment" name="comment" placeholder="Add a comment" required>
    <button type="submit">Submit</button>
</form>
<script>
    const socket = io();
    const form = document.getElementById('comment-form');
    const commentInput = document.getElementById('comment');
    const discussionDiv = document.getElementById('discussion');

    form.addEventListener('submit', function(event) {
        event.preventDefault();
        const comment = commentInput.value;
        socket.emit('newComment', { comment });
        commentInput.value = '';
    });

    socket.on('newComment', function(data) {
        const p = document.createElement('p');
        p.innerHTML = `<strong>${data.username}:</strong> ${data.text}`;
        discussionDiv.appendChild(p);
    });
</script>
